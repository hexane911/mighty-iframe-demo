!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.MightyIframeReact=t(require("react")):e.MightyIframeReact=t(e.react)}(this,(e=>(()=>{"use strict";var t={155:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};r.r(i),r.d(i,{MightyPage:()=>U,MightyWidget:()=>c,MightyWrapper:()=>B});var o=r(155),a=r.n(o);const c=function(e){var t=e.partnerId,n=e.targetUrl,r=e.percent,i=void 0===r?"40%":r,o=e.theme,c=void 0===o?"dark":o,d=e.children,s=e.logoSrc;return a().createElement("mighty-widget",{partnerId:t,targetUrl:n,percent:i,theme:c,logoSrc:s},d)};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var u=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.theme=n||"dark",this.logoSrc=t||"",this.loaderStyleId="partner-loader-style",this.loaderId="partner-loader",this.pageMode=r||!1},t=[{key:"addStyles",value:function(){if(!document.querySelector("#".concat(this.loaderStyleId))){var e=document.createElement("style");e.id=this.loaderStyleId,e.textContent="\n           #".concat(this.loaderId,".container {\n  position: ").concat(this.pageMode?"fixed":"absolute",";\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2000;\n  overflow: hidden;\n\n  background: radial-gradient(\n        134.84% 202.54% at 99.3% 0%,\n        rgba(98, 126, 234, 0.3) 3%,\n        rgba(0, 0, 0, 0.02) 130%), #1c1d26;\n}\n\n#").concat(this.loaderId,".container.light {\n  background: #fff;\n}\n\n#").concat(this.loaderId,".container * {\n  box-sizing: border-box;\n}\n\n#").concat(this.loaderId,".container.closing {\n    opacity: 0; \n    animation: closing 0.3s;\n}\n\n#").concat(this.loaderId," .center-positioned {\n  top: 50%;\n  left: 50%;\n  translate: -50% -50%;\n  position: absolute;\n}\n\n#").concat(this.loaderId," .animation {\n  position: absolute;\n  border-radius: 50%;\n  z-index: 2022;\n  display: flex;\n  justify-content: center;\n  width: 200px;\n  height: 200px;\n}\n\n#").concat(this.loaderId," .logo-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  background: white;\n  width: 100%;\n  height: 100%;\n  z-index: 2;\n  overflow: hidden;\n}\n\n#").concat(this.loaderId," .logo-container.playing {\n  animation: logoBoxAnim 2s ease-in-out infinite;\n}\n\n@keyframes logoBoxAnim {\n  0% {\n    scale: 1;\n  }\n  35%,\n  50% {\n    scale: 0.8;\n  }\n  75% {\n    scale: 1.15;\n  }\n  85%,\n  100% {\n    transition-timing-function: ease-in;\n    scale: 1;\n  }\n}\n\n#").concat(this.loaderId," .partner-logo {\n  object-fit: cover;\n  max-width: 100%;\n  max-height: 100%;\n  min-height: 100%;\n  padding: none !important;\n}\n\n#").concat(this.loaderId," .bg-round {\n  border-radius: 50%;\n  border: solid #ffffff10;\n  z-index: 2002;\n  width: 240px;\n  height: 240px;\n  border-width: 34px;\n}\n\n#").concat(this.loaderId,' .bg-round.playing {\n  animation: borderBoxAnim 2s ease infinite;\n}\n\n@keyframes borderBoxAnim {\n  0% {\n    scale: 1;\n  }\n  40%,\n  50% {\n    scale: 1.2;\n  }\n  80% {\n    scale: 0.9;\n  }\n  87% {\n    scale: 1.08;\n  }\n  100% {\n    scale: 1;\n  }\n}\n\n@property --fill-rad {\n  syntax: "<angle>";\n  inherits: false;\n  initial-value: 0deg;\n}\n\n#').concat(this.loaderId," .arc {\n  --b: 10px; /* the boder thickness */\n  --fill-rad: 0deg; /* control the progression */\n  opacity: 0.3;\n  width: 200px;\n  aspect-ratio: 1;\n  padding: var(--b);\n  box-sizing: border-box;\n  border-radius: 50%;\n  background: linear-gradient(#ffffff4d, #ffffff4d);\n  --_g: /var(--b) var(--b) no-repeat radial-gradient(50% 50%, #000\n        calc(100% - 1px), #0000);\n  mask: top var(--_g),\n    calc(50% + 50% * sin(var(--fill-rad)))\n      calc(50% - 50% * cos(var(--fill-rad))) var(--_g),\n    linear-gradient(#0000 0 0) content-box intersect,\n    conic-gradient(#000 var(--fill-rad), #0000 0);\n}\n\n#").concat(this.loaderId," .arc-white {\n  --b: 4px; /* the boder thickness */\n  background: linear-gradient(#fff, #fff) !important;\n}\n\n#").concat(this.loaderId," .arc.light {\n  background: linear-gradient(#1111114d, #1111114d);\n}\n\n#").concat(this.loaderId," .arc-white.light {\n  background: linear-gradient(#111, #111) !important;\n}\n\n#").concat(this.loaderId," .border-box {\n  width: 145%;\n  height: 145%;\n}\n\n#").concat(this.loaderId," .border-thick {\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n}\n\n#").concat(this.loaderId," .border-thin {\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  z-index: 2003;\n}\n\n#").concat(this.loaderId," .border-thin.playing {\n  animation: borderAnimation 2s ease infinite;\n  scale: -0.98 0.98;\n}\n\n#").concat(this.loaderId," .border-thick.playing {\n  animation: borderAnimation 2s ease infinite;\n  scale: -1 1;\n}\n\n#").concat(this.loaderId," .second.playing {\n  animation-name: secondBorderAnimation !important;\n}\n\n#").concat(this.loaderId," .third.playing {\n  animation-name: thirdBorderAnimation  !important ;\n}\n\n@keyframes borderAnimation {\n  0% {\n    --fill-rad: 0deg;\n    rotate: 0deg;\n    opacity: 1;\n  }\n  50% {\n    --fill-rad: 240deg;\n  }\n  \n  70% {\n    transition-timing-function: ease;\n    --fill-rad: 0deg;\n    opacity: 1;\n\n\n  }\n  80% {\n    rotate: 745deg;\n  }\n  82%,\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes secondBorderAnimation {\n  0% {\n    --fill-rad: 0deg;\n    rotate: 0deg;\n    opacity: 0;\n  }\n  40% {\n    opacity: 0;\n  }\n  50% {\n    --fill-rad: 220deg;\n  }\n  70% {\n    opacity: 1;\n\n    transition-timing-function: ease;\n    --fill-rad: 0deg;\n\n  }\n  80% {\n    rotate: 725deg;\n  }\n  82%,\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes thirdBorderAnimation {\n  0% {\n    --fill-rad: 0deg;\n    rotate: 0deg;\n    opacity: 0;\n  }\n  40% {\n    opacity: 0;\n  }\n  50% {\n    --fill-rad: 200deg;\n  }\n  70% {\n    opacity: 1;\n\n    transition-timing-function: ease;\n    --fill-rad: 0deg;\n\n  }\n  80% {\n    rotate: 705deg;\n  }\n  82%,\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes closing {\n    from {\n        opacity: 1;\n    }\n    to {\n        opacity: 0;\n    }\n}\n"),document.head.appendChild(e)}}},{key:"closeLoader",value:function(e){e.addEventListener("animationend",(function(){e.remove()})),e.classList.add("closing")}},{key:"showLoader",value:function(){var e=document.querySelector(this.pageMode?"mighty-page":"#frame-box");if(!document.getElementById(this.loaderId)&&e){var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("img"),o=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),p=document.createElement("div"),f=document.createElement("div");t.classList.add("container",this.theme),t.setAttribute("id",this.loaderId),n.classList.add("animation","center-positioned"),r.classList.add("logo-container","playing"),i.classList.add("partner-logo"),o.classList.add("bg-round","center-positioned","playing"),a.classList.add("border-box","center-positioned"),c.classList.add("border-box","center-positioned"),d.classList.add("border-box","center-positioned"),s.classList.add("border-thick","center-positioned","arc","playing",this.theme),l.classList.add("border-thick","center-positioned","arc","playing",this.theme,"second"),u.classList.add("border-thick","center-positioned","arc","playing",this.theme,"third"),h.classList.add("border-thin","center-positioned","arc","arc-white","playing",this.theme),p.classList.add("border-thin","center-positioned","arc","arc-white","playing",this.theme,"second"),f.classList.add("border-thin","center-positioned","arc","arc-white","playing",this.theme,"third"),a.appendChild(s),a.appendChild(h),c.appendChild(l),c.appendChild(p),d.appendChild(u),d.appendChild(f),o.appendChild(a),o.appendChild(c),o.appendChild(d),i.setAttribute("src",this.logoSrc),r.appendChild(i),n.appendChild(r),t.appendChild(o),t.appendChild(n),this.addStyles(),e.appendChild(t),this.checkForLoadingEnd(t)}}},{key:"checkForLoadingEnd",value:function(e){var t=this;window.addEventListener("message",(function(n){"loaded"===n.data&&t.closeLoader(e)}))}}],t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var g=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentSidebar=null,this.initializedTriggers=new Map,this.setTriggers=new Set,this.mightySidebarId="mighty-course-sidebar",this.mightyStyleId="mighty-sidebar-styles",this.baseUrl="http://test.mighty.study",this.partnerKey="099d94c60458dd7429e95eaca9cb622c9246a17a7e35d8859284051c48b3fd11",this.sidebarMapTriggers={},this.logoSrc="",this.addStyles(),this.initObserverWhenReady(),console.log(_())},t=[{key:"addStyles",value:function(){if(!document.querySelector("#".concat(this.mightyStyleId))){console.log(_());var e=document.createElement("style");e.id=this.mightyStyleId,e.textContent="\n      #".concat(this.mightySidebarId," {\n        position: fixed;\n        top: 0;\n        right: 0;\n        transform: translateX(100%);\n        width: var(--mighty-expanded-width);\n        height: 100%;\n        color: #AFB4B8;\n        background: radial-gradient(100% 60% at 100% 100%, rgba(98, 126, 234, 0.2) 0%, rgba(0, 0, 0, 0.02) 97.05%), rgb(28, 29, 38);\n        z-index: 1000;\n        display: flex;\n        flex-direction: column;\n        transition: transform 0.3s ease, width 0.3s ease, height 0.3s ease;\n      }\n\n      #").concat(this.mightySidebarId,".light {\n        background: radial-gradient(73.04% 270.4% at 142.59% 81.5%, rgba(98, 126, 234, 0.2) 0%, rgba(0, 0, 0, 0.02) 97.05%), rgb(255, 255, 255);;\n        color: #111111;\n      }\n\n\n      #").concat(this.mightySidebarId,".light div {\n        color: #111111;\n      }\n\n      #").concat(this.mightySidebarId,".mighty-sidebar-expanded {\n        width: 100%;\n      }\n\n      #").concat(this.mightySidebarId,".mighty-sidebar-expanded .mighty-button-close {\n        opacity: 0;\n        pointer-events: none;\n      }\n\n      #").concat(this.mightySidebarId,".mighty-sidebar-open {\n        transform: translateX(0);\n      }\n\n      #").concat(this.mightySidebarId," .mighty-header-sidebar {\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        padding: 10px;\n      }\n      #").concat(this.mightySidebarId," .mighty-sidebar-button {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 32px;\n        height: 32px;\n        border-radius: 5px;\n        color: rgba(255, 255, 255, 0.4);\n        transition: all 0.3s ease;\n        cursor: pointer;\n        background: transparent;\n      }\n      #").concat(this.mightySidebarId," .mighty-sidebar-button:hover {\n        background: rgba(255, 255, 255, 0.15);\n      }\n      #").concat(this.mightySidebarId," .frame-box {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n      #").concat(this.mightySidebarId," iframe {\n        width: 100%;\n        height: 100%;\n        border: none;\n      }\n     @media (max-width: 992px) {\n        #").concat(this.mightySidebarId," {\n          top: auto;\n          bottom: 0;\n          transform: translateY(100%);\n          width: 100%;\n          height: 80%;\n          right: 0;\n          border-radius: 20px 20px 0 0;\n        }\n        #").concat(this.mightySidebarId,".mighty-sidebar-open {\n          transform: translateY(0);\n        }\n        #").concat(this.mightySidebarId,".mighty-sidebar-expanded {\n          height: 100%;\n        }\n      }\n    "),document.head.appendChild(e)}}},{key:"createSidebar",value:function(e){var t=this;document.documentElement.style.setProperty("--mighty-expanded-width",this.percent);var n=document.createElement("div");n.id=this.mightySidebarId;var r=document.createElement("div"),i=document.createElement("div");r.classList.add("mighty-header-sidebar"),r.style.display="flex",r.style.justifyContent="flex-start",r.style.alignItems="center",r.style.padding="10px",i.classList.add("frame-box"),i.setAttribute("id","frame-box");var o=function(e,t,n){var r=document.createElement("div");return r.innerHTML=e,r.classList.add("mighty-sidebar-button"),n&&r.classList.add(n),r.onclick=t,r},a=o('<svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 14.6654L7.66667 7.9987L1 1.33203M10.3333 14.6654L17 7.9987L10.3333 1.33203" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg>',(function(){t.closeSidebar(n)}),"mighty-button-close"),c=!1,d=o('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7852 15.3131L8.71817 9.24609M8.71817 9.24609L8.71817 15.3131M8.71817 9.24609L14.7852 9.24609" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.2148 17.7383L23.2818 23.8053M23.2818 23.8053V17.7383M23.2818 23.8053H17.2148" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg>',(function(){c=!c,n.classList.toggle("mighty-sidebar-expanded")}));r.appendChild(d),r.appendChild(a),n.appendChild(r);var s=document.createElement("iframe");return i.appendChild(s),n.appendChild(i),{sidebar:n,iframe:s}}},{key:"closeSidebar",value:function(e){var t=this;return new Promise((function(n){e.classList.contains("mighty-sidebar-expanded")?(e.classList.remove("mighty-sidebar-expanded"),setTimeout((function(){e.classList.remove("mighty-sidebar-open"),setTimeout((function(){document.querySelector("#".concat(t.mightySidebarId))&&document.body.removeChild(document.querySelector("#".concat(t.mightySidebarId))),t.currentSidebar=null,n()}),300)}),300)):(e.classList.remove("mighty-sidebar-open"),setTimeout((function(){document.querySelector("#".concat(t.mightySidebarId))&&document.body.removeChild(document.querySelector("#".concat(t.mightySidebarId))),t.currentSidebar=null,n()}),300))}))}},{key:"openSidebar",value:function(e,t,n,r,i){var o=this;this.currentSidebar?this.closeSidebar(this.currentSidebar).then((function(){o.createAndOpenSidebar(e,t,n,r,i)})):this.createAndOpenSidebar(e,t,n,r,i)}},{key:"createAndOpenSidebar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this.percent=r||"40%";var o=this.createSidebar(r),a=o.sidebar,c=o.iframe,d=null!==t&&null!==(null==t?void 0:t.courseId),s=null==n?_():n,l=s?"&theme=".concat(s):"&",h="".concat(this.baseUrl,"/space/").concat(e,"?partnerID=").concat(e,"&partnerToken=").concat(this.partnerKey).concat(l);d&&(h="".concat(this.baseUrl,"/courses/").concat(t.courseId),null!==t.chapterId&&(h+="/".concat(t.chapterId)),null!==t.lessonId&&(h+="/".concat(t.lessonId)),h+="?partnerID=".concat(e,"&partnerToken=").concat(this.partnerKey).concat(l)),c.src=h,document.body.appendChild(a),setTimeout((function(){a.classList.add("mighty-sidebar-open"),n&&a.classList.add(n)}),10),this.currentSidebar=a,new u(i,n).showLoader()}},{key:"parseCourseFromUrl",value:function(e){if(!e)return null;var t=e.indexOf("/courses/");if(-1===t)return null;var n=e.slice(t+9).split("/").filter(Boolean),r={courseId:null,chapterId:null,lessonId:null};return n.length>=3?(r.lessonId=n[n.length-1],r.chapterId=n[n.length-2],r.courseId=n[n.length-3]):2===n.length?(r.chapterId=n[n.length-1],r.courseId=n[n.length-2]):1===n.length&&(r.courseId=n[n.length-1]),r.courseId||r.chapterId||r.lessonId?r:null}},{key:"initSidebar",value:function(e,t,n,r,i,o){var a=this;if(M){console.log({selector:e,percentW:i}),console.log(this.sidebarMapTriggers[e]);var c=i||null,d=document.querySelector(e);if(this.setTriggers.add(e),this.sidebarMapTriggers[e]={course:n,theme:r,partnerId:t,percent:c},d){if(this.initializedTriggers.has(e)){var s=this.initializedTriggers.get(e).handler;d.removeEventListener("click",s)}var l=function(){a.openSidebar(t,n,r,c,o)};d.addEventListener("click",l),this.initializedTriggers.set(e,{element:d,handler:l,partnerId:t,course:n,theme:r,percent:c,logoSrc:o})}else console.error('Element with selector "'.concat(e,'" not found.'))}else console.error("Package not authorized. Please provide a valid partnerId.")}},{key:"initObserverWhenReady",value:function(){var e=this;document.body?this.observeDOM():document.addEventListener("DOMContentLoaded",(function(){return e.observeDOM()}))}},{key:"observeDOM",value:function(){var e=this;new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&(t.removedNodes.forEach((function(t){1===t.nodeType&&e.removeTrigger(t)})),t.addedNodes.forEach((function(t){1===t.nodeType&&e.reinitializeTriggers(t)})))}))})).observe(document.body,{childList:!0,subtree:!0})}},{key:"removeTrigger",value:function(e){var t=this;this.initializedTriggers.forEach((function(n,r){(n.element===e||e.contains(n.element))&&(n.element.removeEventListener("click",n.handler),t.initializedTriggers.delete(r))}))}},{key:"reinitializeTriggers",value:function(e){var t=this;this.setTriggers.forEach((function(n,r){(e.matches(r)||e.querySelector(r))&&t.initSidebar(r,t.sidebarMapTriggers[r].partnerId,t.sidebarMapTriggers[r].course,t.sidebarMapTriggers[r].theme,t.sidebarMapTriggers[r].percent,t.sidebarMapTriggers[r].logoSrc)}))}}],t&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}function v(e){var t="function"==typeof Map?new Map:void 0;return v=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(w())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&S(i,n.prototype),i}(e,arguments,I(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,e)},v(e)}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var k=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=I(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,n||[],I(e).constructor):t.apply(e,n))}(this,t)).partnerId=e.getAttribute("partnerid")||null,e.targetUrl=e.getAttribute("targeturl")||null,e.percent=e.getAttribute("percent")||"40%",e.theme=e.getAttribute("theme")||_(),e.logoSrc=e.getAttribute("logoSrc")||"",e.sidebarInstance=window.mightySidebar,console.log("render mighty widget"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,i=[{key:"observedAttributes",get:function(){return["partnerid","targeturl","percent","theme","logoSrc"]}}],(r=[{key:"connectedCallback",value:function(){this.updateAttributes();var e=this.firstElementChild;e&&e.addEventListener("click",this.handleClick.bind(this))}},{key:"disconnectedCallback",value:function(){var e=this.firstElementChild;e&&e.removeEventListener("click",this.handleClick.bind(this))}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&this.updateAttributes()}},{key:"updateAttributes",value:function(){this.partnerId=this.getAttribute("partnerid")||null,this.targetUrl=this.getAttribute("targeturl")||null,this.percent=this.getAttribute("percent")||"40%",this.theme=this.getAttribute("theme")||_(),this.logoSrc=this.getAttribute("logoSrc")||""}},{key:"handleClick",value:function(){if(this.updateAttributes(),this.partnerId){this.sidebarInstance||(this.sidebarInstance=new g);var e=this.sidebarInstance.parseCourseFromUrl(this.targetUrl);this.sidebarInstance.openSidebar(this.partnerId,e,this.theme,this.percent,this.logoSrc)}else console.error("partnerId is not defined")}}])&&y(n.prototype,r),i&&y(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(v(HTMLElement));function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}function O(e){var t="function"==typeof Map?new Map:void 0;return O=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(j())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&C(i,n.prototype),i}(e,arguments,T(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,e)},O(e)}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var A=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=T(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,n||[],T(e).constructor):t.apply(e,n))}(this,t)).partnerId=e.getAttribute("partnerid")||null,e.targetUrl=e.getAttribute("targeturl")||null,e.theme=e.getAttribute("theme")||_(),e.logoSrc=e.getAttribute("logoSrc")||"",e.iframe=null,e.baseUrl="https://test.mighty.study",e.partnerKey="099d94c60458dd7429e95eaca9cb622c9246a17a7e35d8859284051c48b3fd11",e.sidebarInstance=window.mightySidebar,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),n=t,i=[{key:"observedAttributes",get:function(){return["partnerid","targeturl","theme"]}}],(r=[{key:"connectedCallback",value:function(){this.renderIframe(),this.style.width="100%",this.style.height="100vh",this.style.display="block"}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&this.renderIframe()}},{key:"renderIframe",value:function(){this.iframe&&this.removeChild(this.iframe);var e=this.getAttribute("partnerid"),t=this.getAttribute("targeturl"),n=this.getAttribute("logoSrc");if(e){var r=this.getAttribute("theme")||_(),i=r?"&theme=".concat(r):"&",o=document.createElement("iframe");if(o.width="100%",o.height="100%",o.style.border="none",o.style.display="block",console.log(t),t){var a=this.sidebarInstance.parseCourseFromUrl(this.targetUrl);console.log(a);var c=null!==a&&null!==(null==a?void 0:a.courseId),d="".concat(this.baseUrl,"/space/").concat(e,"?partnerID=").concat(e,"&partnerToken=").concat(this.partnerKey).concat(i);c&&(d="".concat(this.baseUrl,"/courses/").concat(a.courseId),null!==a.chapterId&&(d+="/".concat(a.chapterId)),null!==a.lessonId&&(d+="/".concat(a.lessonId)),d+="?partnerID=".concat(e,"&partnerToken=").concat(this.partnerKey).concat(i)),console.log(d),o.src=d}this.appendChild(o),this.iframe=o,new u(n,r,!0).showLoader()}else console.error("partnerId is not defined")}}])&&E(n.prototype,r),i&&E(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(O(HTMLElement)),M=!0,P="dark";function _(){return P}const B=function(e){var t=e.theme,n=void 0===t?"dark":t,r=e.children;return(0,o.useEffect)((function(){!function(){M=!0,P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark";var e=new g;window.initSidebar=function(t){var n=t.selector,r=t.partnerId,i=t.course,o=t.theme,a=t.percent;return e.initSidebar(n,r,i,o,a)},window.mightySidebar=e,customElements.get("mighty-widget")||customElements.define("mighty-widget",k),customElements.get("mighty-page")||customElements.define("mighty-page",A)}(n)}),[n]),a().createElement("div",null,r)},U=function(e){var t=e.partnerId,n=e.targetUrl,r=e.theme,i=void 0===r?"dark":r,o=e.logoSrc,c=void 0===o?"":o;return a().createElement("mighty-page",{partnerId:t,targetUrl:n,theme:i,logoSrc:c})};return i})()));